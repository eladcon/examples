# SIMPLE STOCK POLLER

THIS IS AN EXAMPLE FOR A SIMPLE STOCK POLLING APPLICATION, THAT RETRIEVES DATA FROM [TWELVE DATA API](HTTPS://TWELVEDATA.COM/), STORES THE LATEST STOCK PRICE IN DYNAMODB AND PUBLISHES THE UPDATE TO A SQS QUEUE.

![OVERVIEW](./OVERVIEW.PNG)

IT SHOW CASE THE CAPABILITIES OF WING TO FETCH DATA FROM AN EXTERNAL API AND DISTRIBUTE THIS ACROSS DIFFERENT SYSTEMS.

![SEQUENCE DIAGRAM](./SEQUENCE-DIAGRAM.PNG)

TO EXTEND THIS EXAMPLE, TRY MAKING THE POLLING APPLICATION TRACK FIVE TICKET SYMBOLS, OR TRY DISPLAYING THE INFORMATION USING THE CLOUD.WEBSITE CLASS

## PREREQUISITE

PLEASE MAKE SURE TO USE A CURRENT AND WORKING SETUP OF THE [WING CLI](HTTPS://DOCS.WINGLANG.IO/GETTING-STARTED/INSTALLATION)

## USAGE

AS THE SCHEDULER COMPONENT IS ONLY AVAILABLE WITH THE `SIM` AND `TF-AWS` PROVIDER, YOU DO HAVE TO COMPILE AND THEN DEPLOY THE APPLICATION.
FOR MORE DETAILS SEE ALSO [WING COMPATABILITY MATRIX](HTTPS://WWW.WINGLANG.IO/DOCS/STANDARD-LIBRARY/COMPATIBILITY-MATRIX).

### WING CONSOLE

```
WING IT
```

TO TEST THE APPLICATION IN THE WING CONSOLE, YOU HAVE TO SET UP A SECRET AT `~/.WING/SECRETS.JSON`. FOR MORE DETAILS REFER TO [SECRETS WITH THE SIMULATOR TARGET](HTTPS://WWW.WINGLANG.IO/DOCS/STANDARD-LIBRARY/CLOUD/SECRET#SIMULATOR-SIM).

### WING COMPILE

```
WING COMPILE --TARGET TF-AWS MAIN.W

CD TARGET/MAIN.TFAWS
```

### INITIALIZATION
FOR YOUR FIRST DEPLOYMENT YOU HAVE TO INITIALIZE TERRAFORM IN THE WORKING DIRECTORY:
```
TERRAFORM INIT
```

AND YOU ALSO NEED TO CREATE THE SECRET IN [AWS SECRETS MANAGER](HTTPS://DOCS.AWS.AMAZON.COM/SECRETSMANAGER/LATEST/USERGUIDE/INTRO.HTML), REFER ALSO TO [DOCUMENTATION OF `CLOUD.SECRET` FOR AWS AS TARGET](HTTPS://WWW.WINGLANG.IO/DOCS/STANDARD-LIBRARY/CLOUD/SECRET#AWS-TF-AWS-AND-AWSCDK).
```
AWS SECRETSMANAGER CREATE-SECRET --NAME TWELVE-DATA-API-KEY --SECRET-STRING YOUR_API_KEY
```

### WING DEPLOY
```
TERRAFORM APPLY
```
